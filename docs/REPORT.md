# Отчёт по тестовому заданию — ZenPulse (VibeCoding)

Этот отчёт можно использовать как “основной документ” к сдаче вместе с README. Он построен так, чтобы напрямую закрывать пункты ТЗ: мобильный UX, prompt engineering, логика подписки и итоговая проверка качества.

---

## 0) Вводные

**Цель:** собрать прототип “ZenPulse: AI Meditation App” за ограниченное время, показав:
- быстрый сбор мобильного UI,
- корректную логику paywall/locked,
- AI‑генерацию текста (мок/LLM),
- аккуратную документацию и тесты.

**Окружение:** Ubuntu + Android Emulator.

**Репозиторий:** https://github.com/EvgeniyGospk/TestTask

---

## 1) Инструменты и стек

**Фреймворк:** React Native + Expo (Managed) + TypeScript.  
**UI:** NativeWind (+ Expo LinearGradient для “дорогого” paywall).  
**Навигация:** React Navigation (stack).  
**Подписка (прототип):** мок‑покупка + сохранение `isSubscribed` в AsyncStorage.  
**AI (прототип):** реалистичный мок‑ответ + отдельный модуль промптов.  
**Тесты:** Jest + React Native Testing Library.

Почему так:
- Expo ускоряет сборку и запуск в эмуляторе.
- NativeWind сильно ускоряет верстку и правки под разные экраны.
- Моки (подписка/AI) снижают риски сети/ключей на проверке.

---

## 2) Как я использовал AI (prompt engineering)

### 2.1 Обсуждение архитектуры и документации

Сначала сформировал архитектуру и структуру проекта так, чтобы UI не зависел от деталей подписки/AI:
- `screens/*` — композиция UI и навигация,
- `features/*` — доменная логика (locked/unlocked),
- `services/*` — подписка/AI/storage (моки, которые легко заменить).

Результат: документация в `README.md` и `docs/*`.

### 2.2 Подтягивание актуальной документации (Context7)

Чтобы избежать устаревших рекомендаций, подтягивал свежие “getting started” инструкции через Context7, особенно по:
- NativeWind (Expo setup: `babel.config.js`, `metro.config.js`, `global.css`, `tailwind.config.js`).

### 2.3 Примеры промптов, которые реально использовались

Paywall UI:
- “Собери paywall экран в стиле premium meditation: градиентный фон, крупный заголовок, список преимуществ, карточки планов Monthly/Yearly, выдели Yearly как выгодный. Учти SafeArea и маленькие экраны: экран должен скроллиться и CTA всегда должен быть доступен.”

Locked логика:
- “Если `isSubscribed=false`, premium карточки должны быть серыми и показывать замок. Тап по ним должен вести на Paywall. Логику locked вынеси в отдельную функцию (domain), чтобы не дублировать условия в UI.”

AI фича:
- “Сделай экран ‘AI Настрой дня’: 3 смайлика настроения, кнопка генерации, loading, результат 1–3 предложения. Генерация через мок‑сервис с задержкой.”

---

## 3) Соответствие ТЗ (чеклист)

### 3.1 Экраны (3/3)

- Paywall (подписка) — ✅
- Meditations (главная) — ✅
- AI “Настрой дня” (отдельный экран) — ✅

### 3.2 Paywall требования

- “Дорогой” стиль — ✅ (градиент, типографика, карточки)
- Преимущества Premium — ✅
- 2 тарифа (Monthly/Yearly) + highlight выгодного — ✅
- “Попробовать бесплатно” → мок успешной покупки → доступ — ✅

### 3.3 Meditations требования

- Список карточек с картинками и временем — ✅
- Locked логика при `isSubscribed=false` — ✅ (оверлей + замок)
- Locked → ведёт на Paywall — ✅

### 3.4 AI требования

- 3 варианта настроения — ✅
- Генерация короткого текста — ✅
- Генерация через промпт/мок — ✅ (см. `services/ai/*` + `docs/AI_PROMPTS.md`)

---

## 4) Как запустить и проверить (Ubuntu + Emulator)

### 4.1 Запуск приложения

- `npm install`
- `npx expo start --lan`
- Expo Go в эмуляторе → `Enter URL` → вставить `exp://...` из терминала

### 4.2 Ручная проверка флоу

1) Meditations (без подписки): часть карточек locked (оверлей + замок)  
2) Тап по locked карточке → Paywall  
3) Paywall → “Попробовать бесплатно” → вернёшься на Meditations, Premium активен  
4) Meditations → открыть AI “Настрой дня” → выбрать настроение → “Сгенерировать” → увидеть текст  
5) Locked‑поведение снова проверить на “чистом” состоянии (без подписки):
- очистить данные Expo Go: `adb shell pm clear host.exp.exponent`

### 4.3 Автотесты

- `npm test`
- (опционально) `npx tsc --noEmit`

---

## 5) Качество и тесты

Подход:
- “чистые” бизнес‑правила вынесены в `domain/services`, поэтому unit‑тесты быстрые и стабильные;
- интеграционные тесты проверяют критический флоу Paywall → Meditations и навигацию к AI экрану.

Детали: `docs/TEST_STRATEGY.md` и `docs/QA_CHECKLIST.md`.

---

## 6) Ответ на контрольный вопрос (кратко)

ИИ хуже всего справляется с:
- SafeArea и статусбаром,
- маленькими экранами (переполнение по высоте, CTA “уезжает”),
- длинными текстами и переносами,
- различиями iOS/Android.

Контроль:
- SafeArea wrapper для всех экранов,
- ScrollView на длинных экранах,
- ручная проверка на маленьком/большом размере экрана,
- итеративные правки после каждого “AI‑шага”.

Полная версия ответа — в `README.md`.

---

## 7) Материалы для сдачи (вставить ссылки)

- Screencast 7–12 минут (код + эмулятор): `TODO`
- Демо‑видео прохода Paywall → AI: `TODO`
- Скриншоты: `TODO`
